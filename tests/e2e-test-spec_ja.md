# Card Slot E2Eテスト仕様書

**バージョン:** 2.0.0
**ゲーム仕様バージョン:** v1.1.0
**テストタイプ:** End-to-End (E2E) / 受け入れテスト
**テスト方法:** 手動テスト（ソロプレーモード対象）

---

## テスト概要

このドキュメントは、Card Slotゲームの手動E2Eテストケースを記述しています。
各テストケースは、ソロプレーモードにおいて実行されます。

### テストステータス凡例
- [ ] 未テスト
- [x] 合格
- [!] 不合格（修正が必要）

---

## 1. ゲーム初期化テスト

### TC001: デッキ準備とカード配布
**目的:** 正しいデッキ構成と初期カード配布を検証

**前提条件:** なし

**テスト手順:**
1. 新しいソロゲームを開始
2. 総デッキ枚数が52枚であることを確認:
   - Rainbow 7: 5枚
   - Silver 3: 5枚
   - Cherry: 8枚
   - Watermelon: 8枚
   - Bell: 13枚
   - REPLAY: 13枚
3. プレイヤーが13枚のカードを受け取ることを確認
4. CPUが13枚のカードを受け取ることを確認
5. 残りのデッキが26枚(52 - 13 - 13)であることを確認

**期待される結果:**
- デッキ構成が仕様と一致
- 各プレイヤーが正確に13枚の手札を持つ
- 残りのデッキが26枚

**ステータス:** [x]

---

### TC002: ボードレイアウトの確認
**目的:** 3×3ボードのスロット番号を確認

**テスト手順:**
1. ゲームボードを表示
2. スロット番号が以下のように配置されていることを確認:
   ```
   1 2 3
   8 9 4
   7 6 5
   ```
3. 中央スロットルールを除いて、全9スロットが初期状態で空であることを確認

**期待される結果:**
- スロット番号が仕様と一致
- 全スロットが視覚的に識別可能

**ステータス:** [x]

---

### TC003: 先攻プレイヤーの中央スロット配置（有効なカード）
**目的:** 先攻プレイヤーが制限付きでスロット9にカードを配置する必要があることを確認

**テスト手順:**
1. 新しいゲームを開始
2. プレイヤー1の最初のターンが始まる
3. Cherry、Watermelon、Bell、またはREPLAYカードをスロット9に配置を試みる
4. 配置が受け入れられることを確認
5. ラインエフェクトがトリガーされないことを確認（ボードがまだ完成していない）

**期待される結果:**
- 有効なカード（Rainbow 7またはSilver 3でない）をスロット9に配置可能
- ターンが正常に完了

**ステータス:** [x]

---

### TC004: 先攻プレイヤーの中央スロット配置（無効なカード - Rainbow 7）
**目的:** 最初の手で Rainbow 7 をスロット9に配置できないことを確認

**テスト手順:**
1. プレイヤー1がRainbow 7を手札に持つ新しいゲームを開始
2. プレイヤー1の最初のターンが始まる
3. Rainbow 7をスロット9に配置を試みる
4. 配置が拒否または防止されることを確認

**期待される結果:**
- 初期配置時にRainbow 7をスロット9に配置できない
- エラーメッセージまたはUI防止が発生

**ステータス:** [x]


---

### TC005: 先攻プレイヤーの中央スロット配置（無効なカード - Silver 3）
**目的:** 最初の手でSilver 3をスロット9に配置できないことを確認

**テスト手順:**
1. プレイヤー1がSilver 3を手札に持つ新しいゲームを開始
2. プレイヤー1の最初のターンが始まる
3. Silver 3をスロット9に配置を試みる
4. 配置が拒否または防止されることを確認

**期待される結果:**
- 初期配置時にSilver 3をスロット9に配置できない
- エラーメッセージまたはUI防止が発生

**ステータス:** [x]


---

### TC006: 先攻プレイヤーはスロット9に配置しなければならない
**目的:** プレイヤー1が最初のカードを他のスロットに配置できないことを確認

**テスト手順:**
1. 新しいゲームを開始
2. プレイヤー1の最初のターンが始まる
3. スロット1、2、3、4、5、6、7、または8にカードを配置を試みる
4. 全ての試行が拒否されることを確認

**期待される結果:**
- 最初の手ではスロット9のみが利用可能
- 他のスロットは無効またはエラーを表示

**ステータス:** [x]


---

## 2. 基本ターンメカニクステスト

### TC010: 空スロットへの通常カード配置
**目的:** 空スロットへの基本的なカード配置を確認

**テスト手順:**
1. ゲームを開始（初期スロット9配置後）
2. プレイヤー2が手札からカードを選択
3. 任意の空スロットにカードを配置（例：スロット1）
4. カードが配置され、手札数が1減ることを確認
5. ラインが形成されない場合、ターンが終了することを確認

**期待される結果:**
- カードが正常に配置される
- 手札数が減少
- 次のプレイヤーにターンが移行

**ステータス:** [x]

---

### TC011: ボード満杯時のカード配置（廃棄必須）
**目的:** ボード満杯時の強制廃棄メカニズムを確認

**テスト手順:**
1. 全9スロットが埋まるまでプレイ
2. 現在のプレイヤーが手札からカードを選択
3. 非中央スロットのカードを廃棄対象として選択（例：スロット1）
4. 新しいカードをスロット1に配置
5. 古いカードが廃棄され、新しいカードが配置されることを確認

**期待される結果:**
- プレイヤーは廃棄するカードを選択可能（スロット9を除く）
- 新しいカードが選択したスロットを置き換える
- 古いカードは廃棄パイルに移動

**ステータス:** [x]

---

### TC012: ボード満杯時に中央スロット（スロット9）を廃棄できない
**目的:** カード配置時にスロット9を廃棄対象として選択できないことを確認

**テスト手順:**
1. 全9スロットが埋まるまでプレイ
2. 現在のプレイヤーが手札からカードを選択
3. スロット9を廃棄対象として選択を試みる
4. スロット9が選択できない、または無効化されていることを確認

**期待される結果:**
- スロット9は廃棄選択から保護される
- 他の8スロットのみが選択可能

**ステータス:** [x]

---

### TC013: 配置後の手札数減少
**目的:** 手札管理が正しく機能することを確認

**テスト手順:**
1. 現在のプレイヤーの手札数をメモ（例：13枚）
2. ボードにカードを配置
3. 手札数が12枚になっていることを確認
4. 数ターン続けてプレイ
5. 手札数が毎回正しく更新されることを確認

**期待される結果:**
- 各配置後に手札数が1減少
- UIが正確な手札数を表示

**ステータス:** [x]

---

## 3. ライン形成と解決テスト

### TC020: 横ラインの検出（上段）
**目的:** 横ライン(1,2,3)が検出されることを確認

**テスト手順:**
1. スロット1、2、3が全て同じカードタイプ（例：Bell）を含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認
3. プレイヤーがラインを解決するように促されることを確認

**期待される結果:**
- ライン(1,2,3)が検出される
- プレイヤーはこのラインまたは完成した別のラインを選択しなければならない

**ステータス:** [x]

- MEMO:解決すべきLINE１つなら勝手に解決するようにした

---

### TC021: 横ラインの検出（中段）
**目的:** 横ライン(8,9,4)が検出されることを確認

**テスト手順:**
1. スロット8、9、4が全て同じカードタイプを含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認

**期待される結果:**
- ライン(8,9,4)が検出される

**ステータス:** [x]

---

### TC022: 横ラインの検出（下段）
**目的:** 横ライン(7,6,5)が検出されることを確認

**テスト手順:**
1. スロット7、6、5が全て同じカードタイプを含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認

**期待される結果:**
- ライン(7,6,5)が検出される

**ステータス:** [x]

---

### TC023: 縦ラインの検出（左列）
**目的:** 縦ライン(1,8,7)が検出されることを確認

**テスト手順:**
1. スロット1、8、7が全て同じカードタイプを含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認

**期待される結果:**
- ライン(1,8,7)が検出される

**ステータス:** [x]

- MEMO:
  - チェリー成立で取れるカードないならSkipしたこと
  - チェリー成立で取れるカードが１まいならその一枚をとったこと、を表示させる

---

### TC024: 縦ラインの検出（中央列）
**目的:** 縦ライン(2,9,6)が検出されることを確認

**テスト手順:**
1. スロット2、9、6が全て同じカードタイプを含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認

**期待される結果:**
- ライン(2,9,6)が検出される

**ステータス:** [x]

---

### TC025: 縦ラインの検出（右列）
**目的:** 縦ライン(3,4,5)が検出されることを確認

**テスト手順:**
1. スロット3、4、5が全て同じカードタイプを含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認

**期待される結果:**
- ライン(3,4,5)が検出される

**ステータス:** [x]

---

### TC026: 対角ラインの検出（主対角）
**目的:** 対角ライン(1,9,5)が検出されることを確認

**テスト手順:**
1. スロット1、9、5が全て同じカードタイプを含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認

**期待される結果:**
- ライン(1,9,5)が検出される

**ステータス:** [x]

---

### TC027: 対角ラインの検出（副対角）
**目的:** 対角ライン(3,9,7)が検出されることを確認

**テスト手順:**
1. スロット3、9、7が全て同じカードタイプを含むまでプレイ
2. ゲームがラインが形成されたことを検出することを確認

**期待される結果:**
- ライン(3,9,7)が検出される

**ステータス:** [x]

---

### TC028: 複数ライン - プレイヤーが1つ選択
**目的:** 複数のラインが形成された時、プレイヤーが正確に1つを選択することを確認

**テスト手順:**
1. カード配置により2つ以上のラインが同時に作成される状況を設定
2. カードを配置
3. ゲームがプレイヤーに正確に1つのラインを選択するように促すことを確認
4. 1つのラインを選択
5. 選択したラインのみが解決されることを確認
6. そのラインのカードが廃棄されることを確認

**期待される結果:**
- プレイヤーは正確に1つのラインを選択しなければならない
- 選択したラインのみが解決される
- 他のラインはボード上に残る

**ステータス:** [x]

- MEMO: REPLAYの効果は実実したほうがいい

---

### TC029: ライン解決は必須
**目的:** プレイヤーがライン解決をスキップできないことを確認

**テスト手順:**
1. ラインを形成
2. ライン解決をスキップまたはキャンセルを試みる
3. ゲームが解決を強制することを確認

**期待される結果:**
- プレイヤーはライン解決をスキップできない
- ラインを解決せずにターンを進めることができない

**ステータス:** [x]

---

## 4. ラインエフェクトテスト - Silver 3

### TC030: Silver 3 - デッキを0にしてゲーム終了
**目的:** Silver 3エフェクトがデッキを0にして即座にゲームを終了することを確認

**テスト手順:**
1. 3枚のSilver 3カードでラインを形成
2. ラインを解決
3. Silver 3カードが廃棄されることを確認
4. デッキが即座に0に設定されることを確認
5. ゲームが直ちに終了し、デッキ終了評価に進むことを確認

**期待される結果:**
- 3枚のSilver 3カードが廃棄される
- デッキが即座に0に設定される
- ゲームが即座に終了し、スコアリングフェーズに移行

**ステータス:** [!]

TODO: 銀3でおわっても実況メッセージに、スコア対決の勝者がない

---

### TC031: Silver 3 - 生存状態チェック後のスコアリング
**目的:** Silver 3によるゲーム終了後、生存チェックが先に行われることを確認

**テスト手順:**
1. プレイヤーが手札が少ない状態（例：1枚）でSilver 3ラインを形成
2. ラインを解決してデッキを0にする
3. プレイヤーが手札0枚になった場合、排除されることを確認
4. 排除されたプレイヤーがスコアリングから除外されることを確認

**期待される結果:**
- 生存状態が勝利条件より先にチェックされる
- 排除されたプレイヤーはスコアリングに参加しない

**ステータス:** []

---

## 5. ラインエフェクトテスト - Cherry

### TC040: Cherry - ボードから1枚のカードをピック
**目的:** Cherryエフェクトが最大1枚のカードをピックできることを確認

**テスト手順:**
1. 3枚のCherryカードでラインを形成
2. ラインを解決
3. Cherryカードが廃棄されることを確認
4. 残りのボードから1枚のカードを選択（スロット9を除く）
5. 選択したカードが手札に追加されることを確認

**期待される結果:**
- 3枚のCherryカードが廃棄される
- プレイヤーは1枚のカードを選択できる（スロット9を除く）
- 選択したカードが手札に移動

**ステータス:** [x]

---

### TC041: Cherry - スロット9を選択できない
**目的:** Cherryエフェクトでスロット9を選択できないことを確認

**テスト手順:**
1. Cherryラインを形成
2. ラインを解決
3. スロット9のカードを選択を試みる
4. スロット9が無効化または選択が拒否されることを確認

**期待される結果:**
- スロット9が選択できない
- 他のスロットのみが選択可能

**ステータス:** [x]

---

### TC042: Cherry - 有効なカードが1枚のみの場合は取得必須
**目的:** 有効なカードが1枚のみの場合、そのカードを取得しなければならないことを確認

**テスト手順:**
1. ボード上にスロット9以外に1枚のカードのみがある状態でCherryラインを形成
2. ラインを解決
3. 唯一の有効なカードが自動的に取得されることを確認

**期待される結果:**
- 唯一の有効なカードの取得が必須
- エフェクトが正常に完了

**ステータス:** [x]

---

### TC043: Cherry - ボードが空またはスロット9のみ（ピック0枚）
**目的:** 有効なカードが存在しない場合、エフェクトがスキップされることを確認

**テスト手順:**
1. スロット9のみにカードがある状態でCherryラインを形成
2. ラインを解決
3. エフェクトが自動的にスキップされることを確認

**期待される結果:**
- エフェクトがスキップされる
- 手札にカードは追加されない

**ステータス:** [x]

---

## 6. ラインエフェクトテスト - Watermelon

### TC050: Watermelon - デッキから2枚のカードをドロー
**目的:** Watermelonエフェクトが2枚のカードをドローすることを確認

**テスト手順:**
1. 現在のデッキ枚数をメモ（例：30枚残り）
2. 現在の手札数をメモ（例：8枚）
3. Watermelonラインを形成
4. ラインを解決
5. 3枚のWatermelonカードが廃棄されることを確認
6. デッキから2枚のカードが1枚ずつドローされることを確認
7. デッキ枚数が28枚になっていることを確認
8. 手札数が適切に更新されることを確認

**期待される結果:**
- 3枚のWatermelonカードが廃棄される
- デッキから2枚のカードがドローされる
- デッキ枚数が2減少
- 手札数が増加

**ステータス:** [x]

---

### TC051: Watermelon - 1枚のカードをドロー（デッキに1枚のみ）
**目的:** デッキに1枚のみの場合、部分的なドローを確認

**テスト手順:**
1. デッキが正確に1枚になるまでプレイ
2. Watermelonラインを形成
3. ラインを解決
4. 1枚のカードがデッキからドローされることを確認
5. デッキが空になることを確認
6. ゲームが即座に終了することを確認

**期待される結果:**
- 1枚のカードがドローされる（2枚ではない）
- デッキが空になる
- ゲームが終了し、スコアリングが始まる

**ステータス:** [ ]

---

### TC052: Watermelon - デッキが空の場合はドローなし
**目的:** デッキが空の場合、ドローが発生しないことを確認

**テスト手順:**
1. デッキが空（0枚）になるまでプレイ
2. Watermelonラインを形成（可能であれば）
3. ラインを解決
4. カードがドローされないことを確認
5. ゲームが既に終了しているか終了中であることを確認

**期待される結果:**
- カードがドローされない
- 空デッキによりゲームが終了

**ステータス:** [ ]

---

### TC053: Watermelon - ドローしたカードは受け入れ必須
**目的:** 不利な場合でもドローしたカードを受け入れなければならないことを確認

**テスト手順:**
1. ゲーム終盤近くでWatermelonラインを形成
2. ラインを解決
3. 2枚のカード（例：Rainbow 7とSilver 3でマイナス点）をドロー
4. スコア値に関係なくカードが手札に追加されることを確認

**期待される結果:**
- ドローした全てのカードが手札に追加される
- カードを拒否するオプションはない
- カードが手札に表示される

**ステータス:** [ ]

---

## 7. ラインエフェクトテスト - Bell

### TC060: Bell - デッキから1枚のカードをドロー
**目的:** Bellエフェクトが1枚のカードをドローすることを確認

**テスト手順:**
1. 現在のデッキ枚数をメモ
2. 現在の手札数をメモ
3. Bellラインを形成
4. ラインを解決
5. 3枚のBellカードが廃棄されることを確認
6. デッキから1枚のカードがドローされることを確認

**期待される結果:**
- 3枚のBellカードが廃棄される
- デッキから1枚のカードがドローされる
- デッキ枚数が1減少
- 手札数が増加

**ステータス:** [x]

---

### TC061: Bell - デッキが空の場合はドローなし
**目的:** デッキが空の場合、ドローが発生しないことを確認

**テスト手順:**
1. デッキが空になるまでプレイ
2. Bellラインを形成（可能であれば）
3. ラインを解決
4. カードがドローされないことを確認

**期待される結果:**
- カードがドローされない
- デッキの状態に基づいてゲームが継続または終了

**ステータス:** [ ]

---

## 8. ラインエフェクトテスト - REPLAY

### TC070: REPLAY - リプレイアクション実行
**目的:** REPLAYエフェクトがリプレイアクションを実行することを確認

**テスト手順:**
1. REPLAYラインを形成
2. ラインを解決
3. 3枚のREPLAYカードが廃棄されることを確認
4. リプレイアクションが開始することを確認:
   - デッキから1枚のカードがドローされる
   - カードが最も番号の小さい空スロットに配置される
5. リプレイ配置からラインエフェクトがトリガーされないことを確認

**期待される結果:**
- 3枚のREPLAYカードが廃棄される
- 1枚のカードがドローされ自動的に配置される
- 最も番号の小さい空スロットに配置される
- リプレイからラインエフェクトがトリガーされない

**ステータス:** [x]

---

### TC071: REPLAY - 最も番号の小さい空スロットに配置
**目的:** リプレイが正しいスロットにカードを配置することを確認

**テスト手順:**
1. スロット3、5、7を空にする（例として）
2. REPLAYラインを形成
3. ラインを解決
4. リプレイがスロット3にカードを配置することを確認（3、5、7の中で最小）

**期待される結果:**
- カードが最も番号の小さい空スロットに配置される

**ステータス:** [x]

---

### TC072: REPLAY - 連鎖なし
**目的:** REPLAYアクションが連鎖しないことを確認

**テスト手順:**
1. REPLAYラインを形成
2. ラインを解決
3. リプレイが別のREPLAYラインを形成するカードを配置
4. 新しいREPLAYラインが自動的に解決されないことを確認
5. ゲームが次のプレイヤーのターンに移行することを確認

**期待される結果:**
- REPLAYが別のREPLAYをトリガーしない
- 形成されたラインは次のターンの解決まで残る
- 無限ループが発生しない

**ステータス:** [x]

---

### TC073: REPLAY - デッキが空の場合
**目的:** デッキが空の場合のREPLAYの動作を確認

**テスト手順:**
1. デッキが0枚になるまでプレイ
2. REPLAYラインを形成（ボード状態が許せば）
3. ラインを解決
4. ゲームが終了することを確認（デッキが既に空）

**期待される結果:**
- リプレイは空のデッキからドローできない
- 空デッキによりゲームが終了

**ステータス:** [ ]

---

## 9. 強制リフレッシュイベントテスト

### TC080: 強制リフレッシュ - ターン開始時にボード満杯
**目的:** ボードが完全に埋まっている時の強制リフレッシュを確認

**テスト手順:**
1. 全9スロットが埋まるまでプレイ
2. 次のプレイヤーのターンが始まる
3. プレイヤーアクションの前に強制リフレッシュイベントが発生することを確認:
   - スロット3のカードが廃棄される
   - デッキのトップカードがドローされスロット3に配置される
   - スロット7のカードが廃棄される
   - デッキのトップカードがドローされスロット7に配置される
4. このプロセス中にラインエフェクトが評価されないことを確認
5. プレイヤーが通常のターンを実行できることを確認

**期待される結果:**
- 強制リフレッシュが自動的に発生
- スロット3と7がリフレッシュされる
- ラインエフェクトがトリガーされない
- プレイヤーのターンが通常通り進行

**ステータス:** [x]

---

### TC081: 強制リフレッシュ - Rainbow 7とSilver 3が配置可能
**目的:** 強制リフレッシュ中に特別なカードが配置できることを確認

**テスト手順:**
1. 全9スロットを埋める
2. デッキのトップカードにRainbow 7またはSilver 3が含まれることを確認
3. 強制リフレッシュをトリガー
4. 強制リフレッシュ中にスロット3または7にRainbow 7またはSilver 3が配置できることを確認

**期待される結果:**
- 強制リフレッシュ中のRainbow 7またはSilver 3に制限なし
- スロット3と7にカードが正常に配置される

**ステータス:** [x]

---

### TC082: 強制リフレッシュ - リフレッシュ中にデッキが空になる
**目的:** 強制リフレッシュ中にデッキが空になった場合、ゲームが終了することを確認

**テスト手順:**
1. デッキが1枚残るまでプレイ
2. 全9スロットを埋める
3. 強制リフレッシュをトリガー
4. スロット3用の最初のカードドローでデッキが枯渇
5. ゲームが即座に終了することを確認

**期待される結果:**
- デッキが0枚になった時点でゲームが終了
- 強制リフレッシュが不完全な場合がある
- ゲームがスコアリングに進む

**ステータス:** [ ]

---

### TC083: 強制リフレッシュ - ボードに空スロットがある場合はトリガーされない
**目的:** ボードが満杯の場合のみ強制リフレッシュが発生することを確認

**テスト手順:**
1. 8スロットが埋まるまでプレイ（1つ空）
2. 次のプレイヤーのターンが始まる
3. 強制リフレッシュが発生しないことを確認
4. プレイヤーが通常のターンを実行することを確認

**期待される結果:**
- 強制リフレッシュが発生しない
- 通常のターンメカニクスが適用される

**ステータス:** [x]

---

## 10. 中央スロット（スロット9）特別ルール

### TC090: スロット9 - ライン解決後に空になる
**目的:** ライン解決を通じてスロット9が空になることを確認

**テスト手順:**
1. スロット9が完成したラインの一部になるまでプレイ（例：ライン2-9-6）
2. そのラインを解決
3. スロット9が空になることを確認
4. スロット9が通常のスロットとして扱われることを確認

**期待される結果:**
- ライン解決後にスロット9が空になる
- 後続のターンでスロット9が配置対象として選択可能

**ステータス:** [x]

---

### TC091: スロット9 - 空になった後にRainbow 7が配置可能
**目的:** スロット9が空になった後、Rainbow 7が配置できることを確認

**テスト手順:**
1. ライン解決によりスロット9を空にする
2. 手札にRainbow 7を持つプレイヤーがターンを実行
3. Rainbow 7をスロット9に配置
4. 配置が受け入れられることを確認

**期待される結果:**
- スロット9が空になった後、Rainbow 7が配置可能
- 制限が適用されない

**ステータス:** [x]

---

### TC092: スロット9 - 空になった後にSilver 3が配置可能
**目的:** スロット9が空になった後、Silver 3が配置できることを確認

**テスト手順:**
1. ライン解決によりスロット9を空にする
2. 手札にSilver 3を持つプレイヤーがターンを実行
3. Silver 3をスロット9に配置
4. 配置が受け入れられることを確認

**期待される結果:**
- スロット9が空になった後、Silver 3が配置可能
- 制限が適用されない

**ステータス:** [ ]

---

## 11. 排除テスト

### TC100: プレイヤー排除 - 手札0枚
**目的:** 手札0枚のプレイヤーが即座に排除されることを確認

**テスト手順:**
1. プレイヤーが手札1枚のみになるまでプレイ
2. そのプレイヤーが最後のカードを配置
3. ラインエフェクトが追加のカードを提供しない
4. プレイヤーが即座に排除されることを確認
5. 排除されたプレイヤーが勝利できないことを確認

**期待される結果:**
- 手札0枚のプレイヤーが排除される
- 排除メッセージが表示される
- 残りのプレイヤーが継続または勝利

**ステータス:** [x]

---

### TC101: 排除されたプレイヤーは勝利できない
**目的:** 排除されたプレイヤーが勝利から除外されることを確認

**テスト手順:**
1. プレイヤー1が排除される（手札0枚）
2. プレイヤー2が継続してプレイ
3. ゲームが終了（デッキが空または他の条件）
4. ボード状態やスコアに関係なく、プレイヤー1が勝利できないことを確認

**期待される結果:**
- 排除されたプレイヤーは勝利評価されない
- 生存しているプレイヤーのみが勝利可能

**ステータス:** [ ]

---

## 12. 勝利条件テスト - 即座の勝利

### TC110: Rainbow 7即座の勝利
**目的:** ラインに3枚のRainbow 7が揃うと即座に勝利することを確認

**テスト手順:**
1. プレイヤーが3枚のRainbow 7カードでラインを形成できるまでプレイ
2. 3枚目のRainbow 7を配置してラインを完成
3. ゲームが即座に終了することを確認
4. そのプレイヤーが即座に勝利することを確認

**期待される結果:**
- Rainbow 7ラインの形成時に即座にゲームが終了
- 勝者が宣言される
- 追加のターンやスコアリングなし

**ステータス:** [x]

---

### TC111: Rainbow 7勝利 - 手札の最後のカード
**目的:** Rainbow 7勝利が最後のカードでも有効であることを確認

**テスト手順:**
1. プレイヤーが手札1枚のみ（Rainbow 7）になるまでプレイ
2. そのRainbow 7を配置してRainbow 7ラインを完成
3. プレイヤーが即座に勝利することを確認（排除されない）

**期待される結果:**
- 排除チェックの前にプレイヤーが勝利
- 即座の勝利が排除より優先される

**ステータス:** [x]

---

## 13. 勝利条件テスト - デッキ終了

### TC120: デッキが空 - ゲームが即座に終了
**目的:** デッキが0枚になった時にゲームが終了することを確認

**テスト手順:**
1. デッキが1枚になるまでプレイ
2. 最後のカードをドローする任意のエフェクトをトリガー（Bell、Watermelon、REPLAY、強制リフレッシュ）
3. デッキが空になった後、即座にゲームが終了することを確認
4. スコアリングフェーズが始まることを確認

**期待される結果:**
- デッキ = 0でゲームが終了
- 追加のターンはプレイされない
- 即座にスコアリングが始まる

**ステータス:** [ ]

---

### TC121: スコアリング - 手札スコア計算
**目的:** 残りの手札の正しいスコア計算を確認

**テスト手順:**
1. デッキが空になるまでプレイ
2. プレイヤー1の手札構成をメモ
3. 期待されるスコアを計算:
   - Rainbow 7: -1点各
   - Silver 3: -1点各
   - Cherry: +1点各
   - Watermelon: +2点各
   - Bell: +1点各
   - REPLAY: 0点各
4. 表示されたスコアが計算と一致することを確認
5. プレイヤー2についても繰り返す

**期待される結果:**
- スコアが正しく計算される
- 全てのカード値が正しく適用される

**ステータス:** [ ]

---

### TC122: スコアリング - スコアが高いプレイヤーが勝利
**目的:** スコアによる勝者決定を確認

**テスト手順:**
1. デッキが空になるまでプレイ
2. プレイヤー1のスコア: +5
3. プレイヤー2のスコア: +3
4. プレイヤー1が勝者として宣言されることを確認

**期待される結果:**
- スコアが高い方が勝利
- 勝者が正しく発表される

**ステータス:** [ ]

---

### TC123: スコアリング - マイナススコア
**目的:** マイナススコアが正しく処理されることを確認

**テスト手順:**
1. デッキが空になるまでプレイ
2. プレイヤー1が多くのRainbow 7とSilver 3を持つ（例：スコア-7）
3. プレイヤー2がプラスのカードを持つ（例：スコア+2）
4. プレイヤー2が勝利することを確認

**期待される結果:**
- マイナススコアが正しく計算される
- スコアが高い（よりマイナスでない）プレイヤーが勝利

**ステータス:** [ ]

---

### TC124: スコアリング - 同点
**目的:** 両プレイヤーが同じスコアの場合の引き分け処理を確認

**テスト手順:**
1. デッキが空になるまでプレイ
2. 両プレイヤーが同じ手札スコアを持つ（例：両方とも+4）
3. ゲームが引き分け/ドローを宣言することを確認

**期待される結果:**
- 引き分けが検出される
- 両プレイヤーが勝者として宣言されるか、ゲームがドローを宣言

**ステータス:** [ ]

---

### TC125: スコアリング - 排除されたプレイヤーは評価されない
**目的:** 排除されたプレイヤーがスコアリングに参加しないことを確認

**テスト手順:**
1. プレイヤー1がゲーム序盤で排除される
2. デッキが空になるまでプレイ
3. プレイヤー2のスコアのみが評価される
4. スコアに関係なくプレイヤー2が勝利することを確認

**期待される結果:**
- 排除されたプレイヤーはスコアリングされない
- 生存しているプレイヤーが自動的に勝利

**ステータス:** [ ]

---

## 14. エッジケースとエラー処理

### TC130: 空デッキ - ドローエフェクトが発生しない
**目的:** デッキが空の場合、全てのドローエフェクトがスキップされることを確認

**テスト手順:**
1. デッキを空にする
2. Bell、Watermelon、またはREPLAYラインの解決を試みる
3. ドローが発生しないことを確認
4. ゲームが適切に継続または終了することを確認

**期待される結果:**
- ドローエフェクトがスキップされる
- エラーが発生しない
- ゲーム状態が一貫性を保つ

**ステータス:** [ ]

---

### TC131: 無効なライン - 2種類の異なるカード
**目的:** マッチしないカードを含むラインが検出されないことを確認

**テスト手順:**
1. スロット1にCherryを配置
2. スロット2にBellを配置
3. スロット3にCherryを配置
4. ラインが検出されないことを確認（カードがマッチしない）

**期待される結果:**
- ラインが形成されない
- 解決が発生しない
- ゲームが通常通り継続

**ステータス:** [x]

---

### TC132: 部分的なライン - 2枚のマッチングカード
**目的:** ラインが正確に3枚のマッチングカードを必要とすることを確認

**テスト手順:**
1. スロット1にBellを配置
2. スロット2にBellを配置
3. スロット3を空のままにする
4. ラインが検出されないことを確認

**期待される結果:**
- ラインが形成されない
- ゲームが通常通り継続

**ステータス:** [x]

---

### TC133: UI - 手札カード数表示
**目的:** 手札数が常にUIで正確であることを確認

**テスト手順:**
1. ゲームを開始（各13枚）
2. 様々なエフェクトで数ターンプレイ
3. 各アクション後、表示された手札数が実際の数と一致することを確認

**期待される結果:**
- 手札数表示が常に正確
- 各アクション後に即座に更新される

**ステータス:** [x]

---

### TC134: UI - デッキカード数表示
**目的:** デッキ数が常にUIで正確であることを確認

**テスト手順:**
1. ゲームを開始（デッキ26枚）
2. 様々なドローエフェクトで数ターンプレイ
3. 各ドロー後、表示されたデッキ数が実際の数と一致することを確認

**期待される結果:**
- デッキ数表示が常に正確
- ドロー後に即座に更新される

**ステータス:** [x]

---

### TC135: UI - ボード状態の可視性
**目的:** 全てのボードカードが明確に表示されることを確認

**テスト手順:**
1. ボードを様々なカードで埋める
2. 各スロットがどのカードタイプが存在するかを明確に表示することを確認
3. カードの所有権が明確であることを確認（該当する場合）

**期待される結果:**
- 全てのカードが視覚的に識別可能
- スロット番号が明確
- 現在のゲーム状態が明白

**ステータス:** [x]

---

### TC136: ターンインジケーター
**目的:** 現在のプレイヤーが明確に示されることを確認

**テスト手順:**
1. ゲームを開始
2. プレイヤー1のターンが示されることを確認
3. ターンを完了
4. プレイヤー2のターンが示されることを確認
5. 数ターン交互にプレイ

**期待される結果:**
- 現在のプレイヤーが常に明確に表示される
- 各ターン後にターンインジケーターが更新される

**ステータス:** [x]

---

## 15. ゲームフロー統合テスト

### TC140: 完全なゲーム - 基本的な勝利（Rainbow 7）
**目的:** Rainbow 7勝利までの完全なゲームをプレイ

**テスト手順:**
1. 新しいゲームを開始
2. 戦略的にプレイしてRainbow 7ラインを形成
3. ラインを完成
4. 即座の勝利を確認

**期待される結果:**
- ゲームがスムーズに進行
- 勝利が正しく授与される
- エラーが発生しない

**ステータス:** [x]

---

### TC141: 完全なゲーム - デッキ終了勝利
**目的:** デッキが空になるまでの完全なゲームをプレイ

**テスト手順:**
1. 新しいゲームを開始
2. デッキが枯渇するまでプレイ
3. スコアリングが発生することを確認
4. 正しい勝者が決定されることを確認

**期待される結果:**
- ゲームが完了までスムーズに進行
- スコアリングが正確
- 勝者決定が正しい

**ステータス:** [x]

---

### TC142: 完全なゲーム - プレイヤー排除勝利
**目的:** 一方のプレイヤーが排除される完全なゲームをプレイ

**テスト手順:**
1. 新しいゲームを開始
2. 一方のプレイヤーが0枚になるまでプレイ
3. 排除が発生することを確認
4. 他のプレイヤーが勝利することを確認

**期待される結果:**
- 排除が即座に検出される
- 残りのプレイヤーが勝利
- ゲームが適切に終了

**ステータス:** [x]

---

### TC143: 1ゲーム中の複数回の強制リフレッシュ
**目的:** 複数回の強制リフレッシュイベントが正しく機能することを確認

**テスト手順:**
1. ボードが複数回満杯になるゲームをプレイ
2. 各強制リフレッシュが正しく実行されることを確認
3. デッキが適切に減少することを確認
4. ゲームを完了

**期待される結果:**
- 全ての強制リフレッシュが正しく機能
- エラーや状態の破損なし
- ゲームが正常に完了

**ステータス:** [x]

---

### TC144: 複雑なターン - 複数のラインが利用可能
**目的:** 複数のラインが利用可能な場合のプレイヤーの選択をテスト

**テスト手順:**
1. 2つ以上の完成したラインがあるボード状態を設定
2. プレイヤーがどのラインを解決するか選択できることを確認
3. 1つのラインを選択
4. 選択したラインのみが解決されることを確認
5. 残りのラインを解決するために追加のターンをプレイ

**期待される結果:**
- プレイヤーがどのラインを解決するか明確な選択肢を持つ
- 選択したラインのみが解決される
- 他のラインは将来のターンのために残る
- ゲーム状態が一貫性を保つ

**ステータス:** [x]

---

### TC145: REPLAYとBellによる高速カードサイクル
**目的:** 多数のカードドローでのゲーム安定性をテスト

**テスト手順:**
1. REPLAYとBellラインを頻繁に形成するゲームをプレイ
2. 多くのカードを高速でサイクル
3. デッキ数が正しく減少することを確認
4. 手札サイズが一貫性を保つことを確認
5. ゲームを完了

**期待される結果:**
- ゲームがエラーなしで多数のドローを処理
- 全てのカウントが正確なまま
- 無限ループやクラッシュがない

**ステータス:** [x]

---

## テストサマリーテンプレート

全てのテストを完了後、このサマリーを記入してください:

```
総テストケース数: 75
合格: ___
不合格: ___
未テスト: ___

重大な不合格（ゲームを壊すバグ）: ___
軽微な不合格（UI問題、エッジケース）: ___

全体的なテストカバレッジ: ___%
リリース準備完了: はい / いいえ

備考:
[ここに観察、問題、または推奨事項を追加]
```

---

## 付録: テストデータセットアップ

### サンプルテストシナリオ

**シナリオA: クイックRainbow 7勝利セットアップ**
- プレイヤー1の手札に3枚以上のRainbow 7を手動で設定
- 簡単にライン形成できるようにボードを配置
- 使用例: TC110、TC111

**シナリオB: デッキほぼ空セットアップ**
- デッキが1〜3枚になるまでプレイ
- 使用例: TC051、TC052、TC082、TC120

**シナリオC: ボード満杯セットアップ**
- 全9スロットを混合カードで埋める
- 使用例: TC011、TC012、TC080-TC083

**シナリオD: 複雑なマルチラインセットアップ**
- 2つ以上のラインが既に形成されているボードを配置
- 使用例: TC028、TC144

---

## テスター向け備考

1. **ゲーム状態の保存:** ゲームがセーブ/ロードをサポートしている場合、再テスト用に重要なゲーム状態を保存
2. **バグのスクリーンショット:** バグレポート用に不合格のスクリーンショットをキャプチャ
3. **タイミングの記録:** セットアップまたは実行に最も時間がかかるテストをメモ
4. **エッジケースのバリエーション:** リストされたもの以外の追加のエッジケースを自由にテスト
5. **自動化の可能性:** 将来自動化できる可能性のあるテストをマーク

---

**テスト仕様書の終わり**
