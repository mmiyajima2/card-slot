<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Card Slot</title>
        <link rel="stylesheet" href="css/style.css">

        <!-- Google Analytics 4 -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-FPNTNTGGD5"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-FPNTNTGGD5');
        </script>
    </head>
    <body>
        <div id="app">
            <header>
                <h1>Card Slot</h1>
                <div id="game-info">
                    <span id="current-player">Player 1's Turn</span>
                    <span id="deck-count">Deck: -</span>
                </div>
                <button id="btn-new-game" class="btn btn-primary">New Game</button>
                <a href="https://github.com/mmiyajima2/card-slot/blob/main/docs/manual_en.md" target="_blank" class="btn btn-secondary" id="btn-manual">Manual</a>
            </header>

            <main id="game-area">
                <div class="game-container">
                    <!-- Player 1 Area (上部) -->
                    <section id="player1-area" class="player-area">
                        <div class="player-header">
                            <h2 id="player1-name">Player 1</h2>
                            <div id="player1-status" class="player-status">
                                <span class="hand-count">Hand: 13</span>
                                <span class="score">Score: 0</span>
                            </div>
                        </div>
                        <div id="player1-hand" class="hand">
                            <!-- Player 1の手札がここに表示される -->
                        </div>
                    </section>

                    <!-- ボード (3x3グリッド) -->
                    <section id="board-section">
                        <div id="board" class="board">
                            <!-- スロット1-9がJSで動的に生成される -->
                        </div>

                        <div id="right-panel">
                            <!-- 実況表示エリア -->
                            <aside id="commentary-area">
                                <div id="commentary-messages">
                                    <!-- 実況メッセージがここに表示される -->
                                </div>
                            </aside>

                            <!-- アクションボタン -->
                            <section id="actions-section">
                                <button id="btn-confirm-placement" class="btn btn-success" disabled>Place Card</button>
                                <button id="btn-cancel-placement" class="btn btn-warning" disabled>Cancel</button>
                            </section>
                        </div>
                    </section>

                    <!-- Player 2 Area (下部) -->
                    <section id="player2-area" class="player-area">
                        <div class="player-header">
                            <h2 id="player2-name">Player 2</h2>
                            <div id="player2-status" class="player-status">
                                <span class="hand-count">Hand: 13</span>
                                <span class="score">Score: 0</span>
                            </div>
                        </div>
                        <div id="player2-hand" class="hand">
                            <!-- Player 2の手札がここに表示される -->
                        </div>
                    </section>
                </div>

                <!-- サイドバー: 将来の拡張用 -->
                <aside id="sidebar">
                    <!-- 将来のメニュー等に使用 -->
                </aside>
            </main>

            <!-- モーダル: ゲームモード選択 -->
            <div id="game-mode-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3>Game Mode Selection</h3>

                    <div class="game-mode-section">
                        <h4>Game Mode</h4>
                        <div id="mode-options">
                            <div class="mode-option">
                                <label>
                                    <input type="radio" name="game-mode" value="solo" checked>
                                    Solo Play
                                </label>
                            </div>
                            <div class="mode-option">
                                <label>
                                    <input type="radio" name="game-mode" value="cpu">
                                    vs CPU (Easy)
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="game-mode-section">
                        <h4>First Player</h4>
                        <div id="first-player-options">
                            <div class="mode-option">
                                <label>
                                    <input type="radio" name="first-player" value="1" checked>
                                    Player 1
                                </label>
                            </div>
                            <div class="mode-option">
                                <label>
                                    <input type="radio" name="first-player" value="2">
                                    Player 2
                                </label>
                            </div>
                        </div>
                    </div>

                    <button id="btn-start-game" class="btn btn-primary">Start Game</button>
                </div>
            </div>

            <!-- モーダル: ライン選択 -->
            <div id="line-selection-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3>Select a Line to Resolve</h3>
                    <div id="line-options">
                        <!-- ライン選択肢がJSで動的に生成される -->
                    </div>
                    <button id="btn-confirm-line" class="btn btn-primary">Confirm</button>
                </div>
            </div>

            <!-- モーダル: カード選択 (Silver 3 / Cherry) -->
            <div id="card-selection-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3 id="card-selection-title">Select Cards from Board</h3>
                    <div id="card-selection-options">
                        <!-- スロット選択肢がJSで動的に生成される -->
                    </div>
                    <button id="btn-confirm-cards" class="btn btn-primary" disabled>Confirm</button>
                </div>
            </div>

            <!-- モーダル: ボード満杯時の捨てカード確認 -->
            <div id="discard-confirm-modal" class="modal" style="display: none;">
                <div class="modal-content">
                    <h3 id="discard-confirm-title">Discard Card</h3>
                    <p id="discard-confirm-message">
                        <!-- 動的に生成: Discard [Card] from Slot X? -->
                    </p>
                    <div class="modal-actions">
                        <button id="btn-confirm-discard" class="btn btn-danger">Discard</button>
                        <button id="btn-cancel-discard" class="btn btn-secondary">Cancel</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- JavaScriptファイルの読み込み（順序重要） -->
        <script src="js/card.js?v=1"></script>
        <script src="js/deck.js?v=1"></script>
        <script src="js/board.js?v=1"></script>
        <script src="js/hand.js?v=1"></script>
        <script src="js/discardPile.js?v=1"></script>
        <script src="js/player.js?v=1"></script>
        <script src="js/lineEffectResolver.js?v=1"></script>
        <script src="js/cpuAI.js?v=1"></script>
        <script src="js/gameManager.js?v=1"></script>
        <script src="js/analytics.js?v=1"></script>
        <script src="js/main.js?v=1"></script>
    </body>
</html>